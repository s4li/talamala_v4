{% extends "base.html" %}

{% block extra_css %}
<style>
    .shop-navbar .dropdown-menu {
        z-index: 9999 !important;
    }
    .cart-badge {
        position: absolute;
        top: -5px;
        right: -8px;
        background: var(--tm-primary);
        color: #fff;
        font-size: 0.65rem;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .product-card {
        border: 1px solid var(--tm-border);
        border-radius: 12px;
        overflow: hidden;
        transition: transform 0.2s, box-shadow 0.2s;
        background: white;
    }
    .product-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.08);
    }
    .product-card .card-img-top {
        height: 200px;
        object-fit: cover;
        background: var(--tm-info-900);
    }
    .product-card .price-tag {
        font-size: 1.1rem;
        font-weight: bold;
        color: var(--tm-primary);
    }
    .stock-badge {
        font-size: 0.75rem;
    }
</style>
{% block shop_css %}{% endblock %}
{% endblock %}

{% block body %}
<!-- Price Ticker -->
{% if gold_price %}
<div class="shop-navbar">
    <div class="price-ticker">
        <i class="bi bi-graph-up-arrow me-1"></i>
        قیمت طلای ۱۸ عیار:
        <strong>{{ gold_price | toman }} تومان</strong>
    </div>
</div>
{% endif %}

<!-- Navbar -->
<nav class="shop-navbar sticky-top">
    <div class="container d-flex align-items-center justify-content-between py-3">
        <a href="/" class="d-flex align-items-center gap-2 text-decoration-none">
            <img src="/static/assets/img/logomark-primary.svg" alt="طلامالا" width="32">
            <img src="/static/assets/img/wordmark-primary.svg" alt="طلامالا" width="80" class="d-none d-sm-inline">
        </a>
        <!-- Nav Links (desktop) -->
        <div class="d-none d-md-flex align-items-center gap-4">
            <a href="/verify" class="nav-link"><i class="bi bi-qr-code-scan me-1"></i>اصالت‌سنجی</a>
            <a href="/faq" class="nav-link">سوالات متداول</a>
            <a href="/about" class="nav-link">درباره ما</a>
            <a href="/contact" class="nav-link">تماس با ما</a>
        </div>
        <div class="d-flex align-items-center gap-3">
            <!-- Cart -->
            <a href="/cart" class="nav-link position-relative">
                <i class="bi bi-cart3" style="font-size:1.3rem;"></i>
                {% if cart_count %}
                <span class="cart-badge">{{ cart_count }}</span>
                {% endif %}
            </a>
            <!-- User -->
            {% if user and not user.is_staff %}
            <div class="dropdown">
                <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                    <i class="bi bi-person-circle me-1"></i>
                    {{ user.full_name }}
                </a>
                <ul class="dropdown-menu dropdown-menu-tm dropdown-menu-end">
                    <li><a class="dropdown-item dropdown-item-tm" href="/dashboard"><i class="bi bi-speedometer2 me-2"></i>داشبورد</a></li>
                    <li><a class="dropdown-item dropdown-item-tm" href="/orders"><i class="bi bi-bag me-2"></i>سفارشات من</a></li>
                    <li><a class="dropdown-item dropdown-item-tm" href="/my-bars"><i class="bi bi-gem me-2"></i>شمش‌های من</a></li>
                    <li><a class="dropdown-item dropdown-item-tm" href="/wallet"><i class="bi bi-wallet2 me-2"></i>کیف پول</a></li>
                    <li><a class="dropdown-item dropdown-item-tm" href="/profile"><i class="bi bi-person me-2"></i>پروفایل</a></li>
                    <li><a class="dropdown-item dropdown-item-tm" href="/tickets"><i class="bi bi-headset me-2"></i>پشتیبانی</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item dropdown-item-tm text-tm-negative" href="/auth/logout"><i class="bi bi-box-arrow-right me-2"></i>خروج</a></li>
                </ul>
            </div>
            {% elif user and user.is_staff %}
            <a href="/admin/dashboard" class="nav-link">
                <i class="bi bi-gear me-1"></i> پنل مدیریت
            </a>
            {% else %}
            <a href="/auth/login" class="btn-tm-primary btn btn-sm text-decoration-none">
                <i class="bi bi-box-arrow-in-left me-1"></i> ورود
            </a>
            {% endif %}
        </div>
    </div>
</nav>

<!-- Content -->
<div class="container py-4">
    {% block shop_content %}{% endblock %}
</div>

<!-- Footer -->
<footer class="shop-footer mt-5">
    <div class="container">
        <div class="row g-4">
            <div class="col-lg-4 col-md-6">
                <div class="d-flex align-items-center gap-2 mb-3">
                    <img src="/static/assets/img/logomark-white.svg" alt="طلامالا" width="28">
                    <img src="/static/assets/img/wordmark-white.svg" alt="طلامالا" width="70">
                </div>
                <p class="text-body-sm lh-lg text-justify" style="opacity:0.8;">
                    برند طلاملا با هدف کیفیت بالا، طراحی چشم‌نواز و آرامش خاطر مشتری
                    زنجیره‌ی «ایده پردازی تا تولید و عرضه» را به‌صورت یکپارچه مدیریت
                    می‌کند یعنی پشت هر محصولی که به دست شما میرسد، ترکیبی از خلاقیت،
                    ذوق یک تیم طراحی کاربلد، مهارت استادکاران حرفه‌ای و درنهایت
                    فناوری‌های روز قرار دارد.
                </p>
            </div>

            <div class="col-lg-2 col-md-6">
                <h6>دسترسی سریع</h6>
                <div class="d-flex flex-column gap-2">
                    <a href="/"><i class="bi bi-chevron-left me-1" style="font-size:0.7rem;"></i> فروشگاه</a>
                    <a href="/verify"><i class="bi bi-chevron-left me-1" style="font-size:0.7rem;"></i> اصالت‌سنجی</a>
                    <a href="/faq"><i class="bi bi-chevron-left me-1" style="font-size:0.7rem;"></i> سوالات متداول</a>
                    <a href="/wallet"><i class="bi bi-chevron-left me-1" style="font-size:0.7rem;"></i> کیف پول</a>
                    <a href="/terms"><i class="bi bi-chevron-left me-1" style="font-size:0.7rem;"></i> قوانین و مقررات</a>
                    <a href="/about"><i class="bi bi-chevron-left me-1" style="font-size:0.7rem;"></i> درباره ما</a>
                </div>
            </div>

            <div class="col-lg-3 col-md-6">
                <h6>تماس با ما</h6>
                <ul class="list-unstyled text-body-sm" style="opacity:0.8;">
                    <li class="mb-3 d-flex">
                        <i class="bi bi-building mt-1 me-2" style="color: var(--tm-primary-800);"></i>
                        <span class="lh-base">
                            شهرک غرب، بلوار فرحزادی، مجتمع تجاری لیدوما، طبقه منفی 1، واحد 15
                        </span>
                    </li>
                    <li class="mb-2">
                        <i class="bi bi-telephone me-2" style="color: var(--tm-primary-800);"></i>
                        <span dir="ltr">021 - 86091012</span>
                    </li>
                    <li class="mb-2">
                        <i class="bi bi-envelope me-2" style="color: var(--tm-primary-800);"></i>
                        info@talamala.ir
                    </li>
                    <li class="mb-3">
                        <i class="bi bi-clock me-2" style="color: var(--tm-primary-800);"></i>
                        شنبه تا پنجشنبه (۱۰ الی ۱۸)
                    </li>
                    <li class="mt-4 pt-2" style="border-top: 1px solid rgba(255,255,255,0.15);">
                        <div class="d-flex gap-3 align-items-center">
                            <span class="text-body-sm me-1">ما را دنبال کنید:</span>
                            <a href="https://instagram.com/taalamala" target="_blank" class="text-decoration-none">
                                <i class="bi bi-instagram fs-5" style="color: var(--tm-primary-800);"></i>
                            </a>
                            <a href="https://t.me/talamala_admin" target="_blank" class="text-decoration-none">
                                <i class="bi bi-telegram fs-5" style="color: var(--tm-primary-800);"></i>
                            </a>
                        </div>
                    </li>
                </ul>
            </div>

            <div class="col-lg-3 col-md-6 text-center text-lg-end">
                <h6 class="mb-4">مجوزها و اعتبارنامه‌ها</h6>

                <div class="d-flex justify-content-center justify-content-lg-end mb-4">
                    <a referrerpolicy="origin" target="_blank"
                       href="https://trustseal.enamad.ir/?id=228536&Code=hG9aewGVnQFwW6GVnQFwWJaewGVnQFwW">
                        <img src="https://trustseal.enamad.ir/logo.aspx?id=228536&Code=hG9aewGVnQFwW6GVnQFwWJaewGVnQFwW"
                             alt="اینماد طلاملا"
                             style="width: 80px; height: auto; cursor: pointer; border-radius: 8px; padding: 5px; background: white;">
                    </a>
                </div>

                <div class="d-flex flex-column gap-3 text-lg-end">
                    <a target="_blank" href="https://eanjoman.ir/member/2726"
                       class="text-decoration-none" style="opacity:0.7; font-size:13px; color: white;">
                        <i class="bi bi-patch-check me-1" style="color: var(--tm-primary-800);"></i>
                        عضو انجمن صنفی کسب‌وکارهای اینترنتی
                    </a>
                    <a target="_blank" href="https://tehran.irannsr.org/fa/trade_unit/2794966/swd_id/104366/%D8%A7%D8%B9%D8%B6%D8%A7%DB%8C-%D8%AD%D9%82%D9%88%D9%82%DB%8C-%D8%B2%D8%B1%DA%AF%D8%B1-%D8%AA%D8%A7%D9%88.html"
                       class="text-decoration-none" style="opacity:0.7; font-size:13px; color: white;">
                        <i class="bi bi-cpu me-1" style="color: var(--tm-primary-800);"></i>
                        عضو سازمان نظام صنفی رایانه‌ای
                    </a>
                </div>
            </div>
        </div>

        <hr style="border-color:rgba(255,255,255,0.15); margin:32px 0 16px;">

        <div class="row align-items-center">
            <div class="col-md-6 text-center text-md-end">
                <small>&copy; ۱۴۰۴ تمامی حقوق برای <strong>طلاملا</strong> محفوظ است.</small>
            </div>
            <div class="col-md-6 text-center text-md-start mt-2 mt-md-0">
                <small style="opacity:0.6;">طراحی و توسعه امن سیستم‌های طلا</small>
            </div>
        </div>
    </div>
</footer>
{% endblock %}

{% block extra_js %}
{% block shop_js %}{% endblock %}
{% endblock %}
